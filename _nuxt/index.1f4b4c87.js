import{E as m,G as p,B as o,H as h,I as S,a as A,F as V,b as j,s as B,k as O,J as d,K as F,o as z,e as E,r as w,l as x,j as D}from"./entry.b2982cee.js";import{u as P}from"./uid.2376e4bd.js";import{i as I}from"./isFunction.ccc02bc7.js";function s(e){if(Array.isArray(e)){const t=e.slice().map(s),r=Object.keys(t);return Object.keys(e).filter(n=>!r.includes(n)).forEach(n=>{t[n]=e[n]}),t}else if(typeof e=="object")return Object.keys(e).reduce((t,r)=>(t[r]=s(e[r]),t),{});return e}function C(e,t={}){const r=t.locale||"en-US",n=i=>{let a=String(i);return t.allowDashes&&(a=a.replace(/-/g,"")),t.allowSpaces&&(a=a.replace(/ /g,"")),a};return e.constructor===Array?e.every(i=>m[r].test(n(i))):m[r].test(n(e))}function N(e,t={}){const r=t.locale||"en-US",n=i=>{let a=String(i);return t.allowDashes&&(a=a.replace(/-/g,"")),t.allowSpaces&&(a=a.replace(/ /g,"")),a};return e.constructor===Array?e.every(i=>p[r].test(n(i))):p[r].test(n(e))}function R(e,t={validator:()=>!0}){return e.constructor===Array?e.every(r=>t.validator(r)):t.validator(e)}function G(e,t={allowNegative:!1,allowDecimal:!1}){let r="\\d+";t.allowNegative&&(r="[-]?"+r),t.allowDecimal&&(r+="([\\.\\,]\\d+)?");const n=new RegExp(`^${r}$`);return e.constructor===Array?e.every(i=>n.test(i)):n.test(e)}const g=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function K(e){return e.constructor===Array?e.every(t=>!t||g.test(String(t))):!e||g.test(String(e))}function L(e,t={value:0}){if(e==null)return!1;const r=n=>Number(n);return Array.isArray(e)?e.every(n=>r(n)<=t.value):r(e)<=t.value}function M(e,t={value:0}){return e==null?!1:e.constructor===Array?e.length<=t.value:typeof e=="object"?Object.keys(e).length<=t.value:String(e).length<=t.value}function U(e,t={value:0}){if(e==null)return!1;const r=n=>Number(n);return Array.isArray(e)?e.every(n=>r(n)>=t.value):r(e)>=t.value}function Z(e,t={value:0}){return e==null?!1:e.constructor===Array?e.length>=t.value:typeof e=="object"?Object.keys(e).length>=t.value:String(e).length>=t.value}function q(e,t={invalidateFalse:!1}){return e==null?!1:e.constructor===Array?!!e.length:typeof e=="boolean"?t.invalidateFalse?e:!0:!!String(e).trim().length}function H(e,t={}){if(!t.target)return!1;const r=o(t.schema(),t.target);if(!r)throw new Error(`Could not find target with name '${t.target}' in 'sameAs' validator.`);return e===r.value}const J={alpha:C,alphanumeric:N,custom:R,number:G,email:K,max:L,maxLength:M,min:U,minLength:Z,required:q,sameAs:H};function Q(e,t={}){const r=o(h.messages[h.locale],e),n=I(r)?r(t):r||e;return Object.keys(t).reduce((i,a)=>i.replace(new RegExp(`{${a}}`,"g"),`${t[a]}`),n)}function T(e,t=""){const r=[];return e.valid=(e.validators||[]).reduce((n,i)=>{const a=typeof i=="string"?{name:i}:i,l=J[a.name](e.value,a);if(!l){const{name:f,message:u,...b}=a,$={name:t.split(".").pop(),value:e.value,...b},_=(u instanceof Function?u():u)||Q(`validation.${f}`,$);r.push({name:f,message:_,path:t})}return n&&l},!0),e.invalid=!e.valid,e.errors=r,e}function v(e,t=""){return e.valid=Object.keys(e).filter(r=>!S.includes(r)).reduce((r,n)=>(Object.keys(e[n]).length===0||e[n].validators||e[n].value?e[n]=T(e[n],`${t}`?`${t}.${n}`:n):e[n]=v(e[n],`${t}`?`${t}.${n}`:n),r&&e[n].valid),!0),e.invalid=!e.valid,e}function c(e){return v(e,"")}const y="IForm",W=A({name:y,mixins:[V],provide(){return{form:this}},inheritAttrs:!1,props:{color:{type:String,default:""},disabled:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},name:{type:String,default(){return P("form")}},modelValue:{type:Object,default:()=>null},readonly:{type:Boolean,default:!1},size:{type:String,default:j(y,"size"),validator:B}},emits:["update:modelValue","submit"],computed:{classes(){return{...O(this),[`-${this.size}`]:Boolean(this.size),"-disabled":this.isDisabled,"-readonly":this.isReadonly,"-inline":this.inline}},schema(){return this.modelValue?this.modelValue:o(this.formGroup.schema||this.form.schema||{},this.name)}},methods:{onBlur(e,t){var r,n;if((n=(r=this.parent).onBlur)==null||n.call(r,this.name?`${this.name}.${e}`:e,t),this.modelValue){let i=s(this.modelValue);i=d(i,e,{untouched:!1,touched:!0}),this.shouldValidate(e,"blur")&&(i=c(i)),this.$emit("update:modelValue",i)}},onInput(e,t){var r,n;if((n=(r=this.parent).onInput)==null||n.call(r,this.name?`${this.name}.${e}`:e,t),this.modelValue){let i=s(this.modelValue);i=F(i,e,"value",t),i=d(i,e,{pristine:!1,dirty:!0}),this.shouldValidate(e,"input")&&(i=c(i)),this.$emit("update:modelValue",i)}},onSubmit(e){if(e.preventDefault(),this.modelValue){let t=s(this.modelValue);if(t=d(c(t),"",{untouched:!1,touched:!0}),this.$emit("update:modelValue",t),t.invalid)return}this.$emit("submit",e)},shouldValidate(e,t){const r=o(this.modelValue,e);return(r.validateOn?[].concat(r.validateOn):this.$inkline.options.validateOn).includes(t)}}}),X=["name","readonly","disabled"];function Y(e,t,r,n,i,a){return z(),E("form",{class:x(["form",e.classes]),role:"form",name:e.name,readonly:e.isReadonly,disabled:e.isDisabled,onSubmit:t[0]||(t[0]=(...l)=>e.onSubmit&&e.onSubmit(...l))},[w(e.$slots,"default",{},void 0,!0)],42,X)}const re=D(W,[["render",Y],["__scopeId","data-v-575ccba7"]]);export{re as default};
