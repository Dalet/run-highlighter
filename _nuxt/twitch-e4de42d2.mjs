var B=Object.defineProperty,O=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var C=(a,r,e)=>r in a?B(a,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[r]=e,f=(a,r)=>{for(var e in r||(r={}))A.call(r,e)&&C(a,e,r[e]);if(x)for(var e of x(r))S.call(r,e)&&C(a,e,r[e]);return a},P=(a,r)=>O(a,R(r));import T from"./index-3c55f9ae.mjs";import{a2 as $,a3 as h,a4 as I,a5 as m,a6 as M,a7 as z,a8 as j,a9 as E,_ as N,d as H,aa as L,ab as _,ac as V,o as F,C as U,y as d,x as p,e as q,ad as G}from"./entry-72ed921d.mjs";import J from"./index-b88d6ca9.mjs";const K=a=>$(a)?a:h(a),Q=()=>null;function W(a,r,e={}){var g,v,w,b,D;if(typeof a!="string")throw new TypeError("asyncData key must be a string");if(typeof r!="function")throw new TypeError("asyncData handler must be a function");e=f({server:!0,default:Q},e),e.defer&&console.warn("[useAsyncData] `defer` has been renamed to `lazy`. Support for `defer` will be removed in RC."),e.lazy=(v=(g=e.lazy)!=null?g:e.defer)!=null?v:!1,e.initialCache=(w=e.initialCache)!=null?w:!0;const t=I(),s=E();if(s&&!s._nuxtOnBeforeMountCbs){const o=s._nuxtOnBeforeMountCbs=[];s&&(M(()=>{o.forEach(c=>{c()}),o.splice(0,o.length)}),z(()=>o.splice(0,o.length)))}const i=()=>e.initialCache&&t.payload.data[a]!==void 0,n={data:K((b=t.payload.data[a])!=null?b:e.default()),pending:h(!i()),error:h((D=t.payload._errors[a])!=null?D:null)};n.refresh=(o={})=>t._asyncDataPromises[a]?t._asyncDataPromises[a]:o._initial&&i()?t.payload.data[a]:(n.pending.value=!0,t._asyncDataPromises[a]=Promise.resolve(r(t)).then(c=>{e.transform&&(c=e.transform(c)),e.pick&&(c=Y(c,e.pick)),n.data.value=c,n.error.value=null}).catch(c=>{n.error.value=c,n.data.value=j(e.default())}).finally(()=>{n.pending.value=!1,t.payload.data[a]=n.data.value,n.error.value&&(t.payload._errors[a]=!0),delete t._asyncDataPromises[a]}),t._asyncDataPromises[a]);const u=()=>n.refresh({_initial:!0}),l=e.server!==!1&&t.payload.serverRendered;{l&&t.isHydrating&&a in t.payload.data?n.pending.value=!1:s&&t.payload.serverRendered&&(t.isHydrating||e.lazy)?s._nuxtOnBeforeMountCbs.push(u):u(),e.watch&&m(e.watch,()=>n.refresh());const o=t.hook("app:data:refresh",c=>{if(!c||c.includes(a))return n.refresh()});s&&z(o)}const y=Promise.resolve(t._asyncDataPromises[a]).then(()=>n);return Object.assign(y,n),y}function X(a,r,e={}){return W(a,r,P(f({},e),{lazy:!0}))}function Y(a,r){const e={};for(const t of r)e[t]=a[t];return e}const Z=H({__name:"twitch",setup(a,{expose:r}){r();const e={};if(L().hash.substring(1).split("&").every(s=>{const i=s.split("=");e[i[0]]=i[1]}),!e.access_token)_("/sign-in",{replace:!0});else{const s=V(),{data:i,error:n}=X("sign-in",()=>s.signIn(e.access_token));m(i,()=>{_("/",{replace:!0})}),m(n,()=>{_("/sign-in",{replace:!0})})}const t={fragments:e};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}}),k=q("p",null,"Logging in with Twitch...",-1);function ee(a,r,e,t,s,i){const n=T,u=G,l=J;return F(),U(l,null,{default:d(()=>[p(n,{center:""},{default:d(()=>[k]),_:1}),p(n,{center:""},{default:d(()=>[p(u,{size:"lg",color:"primary"})]),_:1})]),_:1})}var se=N(Z,[["render",ee]]);export{se as default};
